<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Knowledge Base | Admin</title>
  <link rel="stylesheet" href="admin-style.css">
</head>

<!-- TOP NAVBAR (reuse same layout) -->
<div class="topbar">
    <div class="topbar-left">
        <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
        <strong>EAST SYSTEMS COLLEGES OF RIZAL</strong>
    </div>
    <div class="topbar-right">
        <strong class="student-name"></strong><br>
        <span class="student-role"></span>
    </div>
</div>

<body class="admin-body">

<!-- ðŸ”’ ADMIN CHECK -->
<script>
  if (!localStorage.getItem("admin")) {
    window.location.href = "admin-login.html";
  }
</script>

<div class="admin-layout">

  <!-- SIDEBAR -->
  <aside class="admin-sidebar">
  <h2 class="logo">ESCR</h2>

  <ul class="menu">
    <li data-page="dashboard" onclick="goTo('admin-dashboard.html')">
      Dashboard
    </li>
    <li data-page="logs" onclick="goTo('admin-conversation-logs.html')">
      Conversation Logs
    </li>
    <li data-page="kb" onclick="goTo('admin-knowledge-base.html')">
      Knowledge Base
    </li>
    <li data-page="users">
      User Management
    </li>
    <li data-page="analytics">
      Analytics
    </li>
    <li data-page="settings">
      Settings
    </li>
  </ul>

  <button class="logout-btn" onclick="logout()">Logout</button>
</aside>


  <!-- CONTENT -->
  <main class="admin-content">

    <!-- HEADER -->
    <div class="kb-header">
      <div>
        <h1>Knowledge Base</h1>
        <p>Manage FAQs, policies, and academic information</p>
      </div>
      <button type="button" class="btn-primary" onclick="openModal()">+ Add Entry</button>
    </div>

    <!-- STATS -->
    <div class="kb-stats">
      <div class="kb-card">Total Entries <strong id="statTotal">0</strong></div>
      <div class="kb-card">Active <strong id="statActive">0</strong></div>
      <div class="kb-card">Categories <strong id="statCategories">0</strong></div>
      <div class="kb-card">Last Updated <strong id="statUpdated">â€”</strong></div>
    </div>

    <!-- SEARCH & CATEGORY FILTER -->
    <div class="kb-filters">

      <div class="kb-search">
        <input
            type="text"
            placeholder="Search Knowledge Base..."
            oninput="handleSearch(this.value)"
          >
      </div>

      <div class="kb-categories" id="kbCategories"></div>

    </div>


    <!-- ENTRY LIST -->
    <div id="kbList">
    </div>


  </main>
    </div>

    <!-- MODAL -->
    <div class="modal" id="kbModal">
    <form class="modal-content" onsubmit="saveKnowledgeBase(event)">
        <h2>Add New Entry</h2>

        <label>Category</label>
      <select id="kbCategory">
          <option>Enrollment</option>
          <option>Grades</option>
          <option>Finance</option>
          <option>Scholarship</option>
          <option>Schedule</option>
          <option>Academic</option>
        </select>

        <label>Category Answer (shown when category is clicked)</label>
        <textarea
          id="kbCategoryAnswer"
          placeholder="This answer will be shown immediately when the category is selected"
          rows="4"
        ></textarea>

        <hr style="margin: 20px 0;">

        <label>Questions & Answers</label>


    <div id="qaContainer">

      <div class="qa-block">
        <input
          type="text"
          class="kb-question"
          placeholder="Enter question"
          required
        >

        <textarea
          class="kb-answer"
          placeholder="Enter answer"
          required
        ></textarea>
      </div>

    </div>

    <button
      type="button"
      class="add-question-btn"
      onclick="addQuestionBlock()"
    >
      + Add another question
    </button>

    <label>Status</label>
    <div class="radio-group">
      <label>
        <input type="radio" name="kbStatus" value="active" checked> Active
      </label>>
      <label>
        <input type="radio" name="kbStatus" value="draft"> Draft
      </label>
    </div>

    <div class="modal-actions">
      <button type="button" onclick="closeModal()">Cancel</button>
      <button type="submit" class="btn-primary">Add Entry</button>
    </div>

  </div>
</div>

<script src="admin-ui.js"></script>
</body>
</html>
