<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Knowledge Base | Admin</title>
  <link rel="stylesheet" href="css/admin-navbar.css">
  <link rel="stylesheet" href="admin-style.css">

</head>

<body class="admin-body">

<!-- ================= ADMIN TOPBAR ================= -->
<header class="admin-topbar">
  <div class="topbar-left">
    <button class="menu-btn">‚ò∞</button>
    <img src="images/escr-logo.png" class="logo">
    <div class="brand">
      <strong>EAST SYSTEMS COLLEGES OF RIZAL</strong>
      <span>Admin Portal</span>
    </div>
  </div>

  <div class="topbar-right">
    <div class="admin-user">
      <div class="avatar">A</div>
      <div class="user-info">
        <strong>Joel Mariano</strong>
        <span>Admin</span>
      </div>
    </div>
  </div>
</header>

<!-- ================= PAGE LAYOUT ================= -->
<div class="admin-layout">

    <!-- ================= SIDEBAR ================= -->
  <!-- ================= ADMIN SIDEBAR ================= -->
  <aside class="admin-sidebar">
    <ul class="nav-menu">
      <li onclick="goTo('admin-dashboard.html')">
        <span class="icon">üìä</span>
        <span class="label">Dashboard</span>
      </li>

      <li onclick="goTo('admin-conversation-logs.html')">
        <span class="icon">üí¨</span>
        <span class="label">Conversation Logs</span>
      </li>

      <li class="active" onclick="goTo('admin-knowledge-base.html')">
        <span class="icon">üìò</span>
        <span class="label">Knowledge Base</span>
      </li>

      <li onclick="goTo('admin-user-management.html')">
        <span class="icon">üë§</span>
        <span class="label">User Management</span>
      </li>

      <li onclick="goTo('admin-analytics.html')">
        <span class="icon">üìà</span>
        <span class="label">Analytics</span>
      </li>

      <li onclick="goTo('admin-settings.html')">
        <span class="icon">‚öôÔ∏è</span>
        <span class="label">Settings</span>
      </li>
    </ul>

    <button class="logout-btn">
      <span class="icon">‚Ü©Ô∏è</span>
      Logout
    </button>

  </aside>

<!-- üîí ADMIN CHECK -->
    <script>
      const admin = localStorage.getItem("admin");
      if (!admin) {
        window.location.href = "admin-login.html";
      }
    </script>

  <!-- CONTENT -->
  <main class="admin-content">

    <!-- HEADER -->
    <div class="kb-header">
      <div>
        <h1>Knowledge Base</h1>
        <p>Manage FAQs, policies, and academic information</p>
      </div>
      <button type="button" class="btn-primary" onclick="openModal()">+ Add Entry</button>
    </div>

    <!-- STATS -->
    <div class="kb-stats">
      <div class="kb-card">Total Entries <strong id="statTotal">0</strong></div>
      <div class="kb-card">Active <strong id="statActive">0</strong></div>
      <div class="kb-card">Categories <strong id="statCategories">0</strong></div>
      <div class="kb-card">Last Updated <strong id="statUpdated">‚Äî</strong></div>
    </div>

    <!-- SEARCH & CATEGORY FILTER -->
    <div class="kb-filters">

      <div class="kb-search">
        <span class="search-icon">üîç</span>
        <input
          type="text"
          placeholder="Search Knowledge Base..."
          oninput="handleSearch(this.value)"
        >
      </div>

      <div class="kb-categories" id="kbCategories">
        <!-- buttons injected by JS -->
      </div>

    </div>



    <!-- ENTRY LIST -->
    <div id="kbList">
    </div>


  </main>
    </div>

    <!-- MODAL -->
    <div class="modal" id="kbModal">
      <div class="modal-dialog">

        <!-- HEADER -->
        <div class="modal-header">
          <h2>Add New Entry</h2>
          <button class="modal-close" onclick="closeModal()">√ó</button>
        </div>

        <!-- BODY (SCROLLS) -->
        <form class="modal-body" onsubmit="saveKnowledgeBase(event)">

          <label>Category</label>
          <select id="kbCategory">
            <option>Enrollment</option>
            <option>Grades</option>
            <option>Finance</option>
            <option>Scholarship</option>
            <option>Schedule</option>
            <option>Academic</option>
          </select>

          <label>Category Answer</label>
          <textarea
            id="kbCategoryAnswer"
            rows="4"
            placeholder="Shown when category is selected"
          ></textarea>

          <hr>

          <label>Questions & Answers</label>

          <div id="qaContainer">
            <div class="qa-block">
              <input type="text" class="kb-question" placeholder="Enter question" required>
              <textarea class="kb-answer" placeholder="Enter answer" required></textarea>
            </div>
          </div>

          <button type="button" class="add-question-btn" onclick="addQuestionBlock()">
            + Add another question
          </button>

          <label class="status-label">Status</label>

          <div class="status-options">
            <label class="status-option">
              <input type="radio" name="kbStatus" value="active" checked>
              Active
            </label>

            <label class="status-option">
              <input type="radio" name="kbStatus" value="draft">
              Draft
            </label>
          </div>

          <!-- FOOTER -->
          <div class="modal-footer">
            <button type="button" onclick="closeModal()">Cancel</button>
            <button type="submit" class="btn-primary">Add Entry</button>
          </div>

        </form>
      </div>
    </div>

</div>

<script src="admin-ui.js"></script>
</body>
</html>