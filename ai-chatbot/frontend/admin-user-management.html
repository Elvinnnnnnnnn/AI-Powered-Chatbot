<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin | User Management</title>
  <link rel="stylesheet" href="css/admin-navbar.css">
  <link rel="stylesheet" href="css/admin-user-management.css">
</head>

<body class="admin-body users-page">

<!-- ================= ADMIN TOPBAR ================= -->
<header class="admin-topbar">
  <div class="topbar-left">
    <img src="images/school-logo-remove-background.png" class="logo">
    <div class="brand">
      <strong>EAST SYSTEMS COLLEGES OF RIZAL</strong>
      <br>
      <span>Admin Portal</span>
    </div>
  </div>

  <div class="topbar-right">
    <div class="admin-user">
      <img id="topbarPhoto" class="topbar-photo" src="images/ai-profile.jpg">
      <div class="user-info">
        <strong id="topbarAdminName"></strong>
        <br>
        <span>Administrator</span>
      </div>
    </div>
  </div>
</header>

<!-- ================= PAGE LAYOUT ================= -->
<div class="admin-layout">

    <!-- ================= SIDEBAR ================= -->
  <!-- ================= ADMIN SIDEBAR ================= -->
  <aside class="admin-sidebar">
    <ul class="nav-menu">
      <li onclick="goTo('admin-dashboard.html')">
        <span class="icon">ğŸ“Š</span>
        <span class="label">Dashboard</span>
      </li>

      <li onclick="goTo('admin-conversation-logs.html')">
        <span class="icon">ğŸ’¬</span>
        <span class="label">Conversation Logs</span>
      </li>

      <li onclick="goTo('admin-knowledge-base.html')">
        <span class="icon">ğŸ“˜</span>
        <span class="label">Knowledge Base</span>
      </li>

      <li class="active" onclick="goTo('admin-user-management.html')">
        <span class="icon">ğŸ‘¤</span>
        <span class="label">User Management</span>
      </li>

      <li onclick="goTo('admin-analytics.html')">
        <span class="icon">ğŸ“ˆ</span>
        <span class="label">Analytics</span>
      </li>

      <li onclick="goTo('admin-settings.html')">
        <span class="icon">âš™ï¸</span>
        <span class="label">Settings</span>
      </li>
    </ul>

    <button class="logout-btn" onclick="logout()">
      <span class="icon">â†©ï¸</span>
      Logout
    </button>


  </aside>


  <!-- ğŸ”’ ADMIN AUTH CHECK -->
  <script>
    if (!localStorage.getItem("admin")) {
      window.location.replace("admin-login.html");
    }
  </script>


  <!-- MAIN CONTENT -->
  <main class="admin-content">

    <!-- HEADER -->
    <div class="admin-header">
      <div>
        <h1>User Management</h1>
        <p style="font-size:14px;color:#6b7280;">
          Manage user accounts and permissions
        </p>
      </div>

      <button class="btn-primary add-user-btn">+ Add New User</button>
    </div>

    <!-- STATS (can be wired later) -->
    <div class="stats-grid">
      <div class="stat-card">
        <small>Total Users</small>
        <h2 id="statUsersTotal">â€”</h2>
      </div>

      <div class="stat-card">
        <small>Students</small>
        <h2 class="green" id="statStudents">â€”</h2>
      </div>

      <div class="stat-card">
        <small>Admins</small>
        <h2 class="red" id="statAdmins">â€”</h2>
      </div>
    </div>

    <!-- FILTER BAR -->
    <div class="kb-filters">
      <div class="kb-search">
        <span class="search-icon">ğŸ”</span>
        <input type="text" placeholder="Search by name or email...">
      </div>

      <div class="kb-categories">
        <button class="active" data-role="all">All Roles</button>
        <button data-role="student">Students</button>
        <button data-role="admin">Admins</button>
    </div>

    </div>

    <!-- USERS TABLE -->
    <div class="panel">
      <table width="100%" cellpadding="10">
        <thead>
          <tr style="text-align:left;font-size:13px;color:#6b7280;">
            <th>User</th>
            <th>Role</th>
            <th>Status</th>
            <th>Last Active</th>
            <th>Joined Date</th>
            <th>Action</th>
          </tr>
        </thead>

        <!-- ğŸ”¥ BACKEND WILL POPULATE -->
        <tbody id="usersTableBody"></tbody>
      </table>
    </div>

  </main>
</div>

<!-- ================= ADD USER MODAL ================= -->
<div class="modal-overlay" id="addUserModal">
  <div class="modal">
    <div class="modal-header">
      <h3>Add New User</h3>
      <button class="modal-close" onclick="closeAddUserModal()">Ã—</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label>Full Name</label>
        <input type="text" placeholder="Enter full name">
      </div>

      <div class="form-group">
        <label>Email Address</label>
        <input type="email" placeholder="Enter email address">
      </div>

      <div class="form-group">
        <label>Role</label>
        <select>
          <option disabled selected>Select Role</option>
          <option value="student">Student</option>
          <option value="admin">Admin</option>
        </select>
      </div>

      <div class="form-group">
        <label>Temporary Password</label>
        <input type="password" placeholder="Enter password">
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" onclick="closeAddUserModal()">Cancel</button>
      <button class="btn-primary" onclick="submitAddUser()">Add User</button>
    </div>
  </div>
</div>

<!-- ================= EDIT USER MODAL ================= -->
<div class="modal-overlay" id="editUserModal">
  <div class="modal">
    <div class="modal-header">
      <h3>Edit User</h3>
      <button class="modal-close" onclick="closeEditUserModal()">Ã—</button>
    </div>

    <div class="modal-body">
      <input type="hidden" id="editUserId">

      <div class="form-group">
        <label>Status</label>
        <select id="editUserStatus">
          <option value="active">Active</option>
          <option value="inactive">Inactive</option>
        </select>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-secondary" onclick="closeEditUserModal()">Cancel</button>
      <button class="btn-primary" onclick="submitEditUser()">Save Changes</button>
    </div>
  </div>
</div>

<script src="admin.js"></script>
<script src="admin-ui.js"></script>
</body>
</html>
