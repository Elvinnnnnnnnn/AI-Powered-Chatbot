<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>ESCR Chatbot</title>

        <!-- GLOBAL STYLES -->
        <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <div class="layout">

            <!-- TOP NAVBAR -->
            <header class="topbar modern">
                <div class="topbar-left">
                    <button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>
                    <img src="images/school-logo.jpg" class="logo">
                    <div class="title">
                        <strong>East Systems Colleges of Rizal</strong>
                        <span>Student Portal</span>
                    </div>
                </div>

                <div class="topbar-right">
                    <div class="profile">
                        <div class="avatar">EB</div>
                        <div class="profile-text">
                            <strong class="student-name"></strong>
                            <span class="student-role"></span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- SIDEBAR -->
            <aside class="sidebar modern" id="sidebar">
                <a href="dashboard.html">üè† Dashboard</a>
                <a href="chatbot.html" class="active">ü§ñ ESCR Chatbot</a>
                <a href="class-schedule.html">üìÖ Class Schedule</a>
                <a href="school-calendar.html">üóì School Calendar</a>
                <a href="settings.html">‚öôÔ∏è Settings</a>
                <a href="login.html" class="logout">üö™ Logout</a>
            </aside>

            <!-- MAIN CONTENT -->
            <div class="main-content">

                <!-- üî¥ RED CHAT WRAPPER (LIKE CALENDAR) -->
                <div class="chat-red">

                    <!-- ‚ö™ WHITE CHAT CARD -->
                    <div class="chat-container">

                        <!-- CHAT MESSAGES -->
                        <div class="chat-box" id="chatBox"></div>

                        <!-- CATEGORY BUTTONS -->
                        <div class="quick-actions" id="categoryActions"></div>

                        <!-- INPUT BAR -->
                        <div class="chat-input">
                            <input
                                type="text"
                                id="userMessage"
                                placeholder="Type your message..."
                            >
                            <button onclick="sendMessage()">Send</button>
                        </div>

                    </div>
                </div>

            </div>

        </div>

        <script src="script.js"></script>

        <script>
            function toggleSidebar() {
                document.getElementById("sidebar").classList.toggle("show");
            }

            document.addEventListener("DOMContentLoaded", () => {
                requireLogin();

                sessionStorage.removeItem("activeCategory");
                isInCategoryFlow = false;

                loadCategories();
                loadChatHistory();
                setInterval(loadChatHistory, 5000);
            });
        </script>

    </body>
</html>